<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.yedam.prj.member.serivce.member-map">
	
	<insert id="memberInsert" parameterType="co.yedam.prj.member.vo.MemberVO">
		insert into member values (#{u_id}, #{u_pwd}, #{u_name}, #{u_adr}, #{u_adrcode}, #{u_tel}, #{u_mail}, #{joinwait}, #{s_reg}, #{s_pay}, #{regdate})
	</insert> <!-- 필요없는 컬럼도 다 기입해뒀습니다. 사용시 수정 필요 -->
	
	<!--  마일리지 증가 -->
	<update id="mileAgeU" parameterType="co.yedam.prj.member.vo.MemberVO">
		update member set mileage= mileage + 1000 where u_id= #{u_id}
	</update>
	<!-- 마일리지 차감 -->
	<update id="mileAgeD" parameterType="co.yedam.prj.member.vo.MemberVO">
		update member set mileage= CASE WHEN  mileage-1000 &lt; 0 THEN 0 ELSE mileage-1000 END where u_id= #{u_id}
	</update>
	
	
	<select id="memberList" resultType="co.yedam.prj.member.vo.MemberVO">
		select * from member
	</select>
	
	<select id="memberListWait" resultType="co.yedam.prj.member.vo.MemberVO">
		select * from member where JOINWAIT='Y'
	</select>
	
	<select id="memberListM" resultType="co.yedam.prj.member.vo.MemberVO">
		select * from member where JOINWAIT='N' and S_REG='N'
	</select>
	
	<select id="memberListBM" resultType="co.yedam.prj.member.vo.MemberVO">
		select * from member where S_REG='Y'
	</select>
	
	
</mapper>